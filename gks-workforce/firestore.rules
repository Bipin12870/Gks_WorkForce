rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    /*
    GLOBAL DEV MODE
    ----------------
    - No Firebase Auth implemented yet
    - Role logic handled at application level
    - Internal / hobby project
    */

    /* USERS
       - Created and managed by admin via UI
       - Used for staff profiles and pay rates
    */
    match /users/{userId} {
      allow read, write: if true;
    }

    /* AVAILABILITY
       - Staff submits weekly availability
       - Admin reviews and approves
    */
    match /availability/{availabilityId} {
      allow read, write: if true;
    }

    /* SHIFTS (APPROVED SHIFTS)
       - Admin creates, edits, approves, deletes
       - Source of truth for roster + weekly pay
    */
    match /shifts/{shiftId} {
      allow read, write: if true;
    }

    /* TIME RECORDS (FUTURE USE)
       - Clock-in / clock-out placeholder
       - Not active yet
    */
    match /timeRecords/{recordId} {
      allow read, write: if true;
    }
    
    /* TIMESHEETS
       - Staff submits worked hours
       - Admin reviews and approves
    */
    match /timesheets/{timesheetId} {
      allow read, write: if true;
    }
    
    match /rosterAuditLogs/{logId} {
      allow read, write: if true;
    }
  }
}
